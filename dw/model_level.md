# 数据模型
* 星型模型
    > 数仓（具体说是dwd层）中只有一张包含历史数据且不冗余的事实表和一组附属维度表，每个维度一张。
    事实表与维度表之间通过外键和主键关联。星型模型的维度表可能存在冗余，因此是反三范式的，这种模型在数据维护上较麻烦，但是性能更高，业界普遍使用星型模型。星型模型的难点在于拉链表的维护，拉链表一般不能有冗余

* 雪花模型
    > 雪花模型在星型模型的基础上，维度表进一步规范化为子维度表，这些子维度表没有直接与事实表连接，而是通过其他维度表连接到事实表上，看起来就像一片雪花，故称雪花模型。
    也就是说雪花模型是星型模型的进一步扩展，将其维度表扩展为更小的维度表，形成一种层次。这样就通过最大限度的减少数据存储量以及联合较小的维度表来改善查询性能，且去除了星型模型中的冗余数据

    ![](https://oss.dataown.cn/data/2020/8/96c4ebe4f9e82786.png)
* 星系模型
    > 多个事实表采用星型模型共享维度表，就形成了一个星系
* Data Vault模型
    > 如果解决了拉链表的维护问题，星型模型的缺陷就已经可以忽略。
    Data Vault模型由中心表、链接表、附属表、PIT表组成，这里的中心表，事实上就是维度表，链接表就是事实表、附属表是拉链表。Data Vault模型就是通过将拉链表从维度表中分离出来，来达到方便维护的目的



## 特点对比
![](https://oss.dataown.cn/data/2020/8/7e34ec475aa4c39a.png)


# 表的种类和特征

<table>
    <tr>
      <th>表的类型</th>
      <th>特征</th>
    <tr>
    <tr>
      <th>事务事实表</th>
      <th>保存某一事务的日志数据，事务一旦被提交就成为历史数据，只能以增量的方式维护</th>
    <tr>
    <tr>
      <th>维度表</th>
      <th>从某个角度观察事实数据的窗口，存储的数据用来从某个角度描述事实</th>
    <tr>
    <tr>
      <th>增量表</th>
      <th>当数据改变时，将这个改变和改变后的结果记录下来，就是增量表（用户A下单取消的过程）</th>
    <tr>
    <tr>
      <th>拉链表</th>
      <th>用特定字段维护缓慢变化维度的表</th>
    <tr>
    <tr>
      <th>周期快照表</th>
      <th>按固定周期对事实表进行统计生成的表，按时间段保存记录，增量更新</th>
    <tr>
    <tr>
      <th>累积快照表</th>
      <th>按过程对事实表进行统计生成的表，将每个事务切分成多个小事务，明确开始和结束的状态，每个小事务只保存一条结果</th>
    <tr>
</table>
